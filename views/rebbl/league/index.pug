//- coachDetail.pug
extends ..\sublayout.pug
block vars
  - var options = {active: league, title: "REBBL SEASON 8"}


block navigation
  div(class="Tabs Tabs--darkBackground")
    div(class="Tabs-header-wrapper")
      div(class="Tabs-header")
        div(class="Tabs-scroller-wrapper")
          div(class="Tabs-scroller")
            nav(class="Tabs-bar container")
              a(href="/rebbl/" + league class="Tabs-tab" + (activeRound == 0 ? " Tabs-tab--active" : "") style="padding-left:5px;padding-right:5px" ) Standings
              each round in rounds.sort(function(a,b){return a > b ? 1: -1})
                a(class="Tabs-tab"  + (activeRound == round ? " Tabs-tab--active" : "") href="/rebbl/"+league + "/" + round style="padding-left:5px;padding-right:5px")= round.replace("Season 8 - Division","div").replace("Season 8 ","")

block content
  div(class="Background u-bottomPadding--large u-topPadding--medium")
    div(class="/*TexturedBackground TexturedBackground--light-primary*/")
      div(class="container navcontainer" data-index="0")
        h1(class="u-no-text-transform u-verticalMargin--xx-small")= "Standings " + league
        div(class="League-Standings")
          -let i = -1
          for div, x in standings
            - i++
            div(class="table-striped TeamLabel-info")
              div(class="TableHeader" style="border-bottom: 3px solid #bdbcbccf;padding-bottom: 2px;")
                div(title="" class="Standings-details Standings-header")= div[0].competition
              div(class="TableHeader" style="border-bottom: 3px solid #bdbcbccf;padding-bottom: 2px;")
                div(style="display:flex; flex-direction:row;flex-wrap:wrap")
                  div(style="flex-grow:1;flex-basis:0;font-size: 1.25em") #
                  div(style="flex-grow:6;flex-basis:0;font-size: 1.25em") Coach
                  div(style="flex-grow:6;flex-basis:0;font-size: 1.25em") Team
                  div(style="flex-grow:6;flex-basis:0;font-size: 1.25em") Race
                  div(style="flex-grow:2;flex-basis:0;font-size: 1.25em") Pts.
                  div(style="flex-grow:2;flex-basis:0;font-size: 1.25em") W
                  div(style="flex-grow:2;flex-basis:0;font-size: 1.25em") D
                  div(style="flex-grow:2;flex-basis:0;font-size: 1.25em") L
                  div(style="flex-grow:2;flex-basis:0;font-size: 1.25em;overflow:hidden") P
                  div(style="flex-grow:2;flex-basis:0;font-size: 1.25em;overflow:hidden") TD diff
                  div(style="display:block;width:100%;height:0;") &nbsp;
                  - let cutoffs = league === "REL" ? [5,3,3,3,2,2,2,2,1,1,1,1,1] : (league === "GMan" ? [5,3,3,2,2,1,1,1,1,1] : [5,3,2,1,1])
                  each coach, y in div.sort(function(a,b){if(a.points > b.points) {return -1} if (b.points > a.points) {return 1} if (a.tddiff > b.tddiff) {return -1} if (b.tddiff > a.tddiff) {return 1} if(a.loss>b.loss){return 1} if(b.loss > a.loss){return -1} return 0; })
                    div(style="flex-grow:1;flex-basis:0")= y+1
                    div(style="flex-grow:6;flex-basis:0;overflow:hidden")
                      a(href="/rebbl/coach/"+coach.id )= coach.name
                    div(style="flex-grow:6;flex-basis:0;overflow:hidden")= coach.team
                    div(style="flex-grow:6;flex-basis:0;overflow:hidden")= coach.race
                    div(style="flex-grow:2;flex-basis:0")= coach.points
                    div(style="flex-grow:2;flex-basis:0")= coach.win
                    div(style="flex-grow:2;flex-basis:0")= coach.draw
                    div(style="flex-grow:2;flex-basis:0")= coach.loss
                    div(style="flex-grow:2;flex-basis:0")= coach.games
                    div(style="flex-grow:2;flex-basis:0")= coach.tddiff
                    div(style="display:block;width:100%;height:0;") &nbsp;
                    - if (y+1 == cutoffs[i])
                      div(style="flex-grow:1;flex-basis:0" class="Standings-divider--flex")
                        span(class="Standings-dividerText--correction")
                      div(style="flex-grow:6;flex-basis:0;margin-top:0px" class="Standings-divider--flex" )
                        span(class="Standings-dividerText")  &nbsp; &nbsp;Playoffs Cutoff &nbsp; &nbsp;
                      div(style="flex-grow:6;flex-basis:0" class="Standings-divider--flex")
                        span(class="Standings-dividerText--correction")
                      div(style="flex-grow:2;flex-basis:0" class="Standings-divider--flex")
                        span(class="Standings-dividerText--correction")
                      div(style="flex-grow:2;flex-basis:0" class="Standings-divider--flex")
                        span(class="Standings-dividerText--correction")
                      div(style="flex-grow:2;flex-basis:0" class="Standings-divider--flex")
                        span(class="Standings-dividerText--correction")
                      div(style="flex-grow:2;flex-basis:0" class="Standings-divider--flex")
                        span(class="Standings-dividerText--correction")
                      div(style="flex-grow:2;flex-basis:0" class="Standings-divider--flex")
                        span(class="Standings-dividerText--correction")
                      div(style="flex-grow:2;flex-basis:0" class="Standings-divider--flex")
                        span(class="Standings-dividerText--correction")
                      div(style="display:block;width:100%;height:0;") &nbsp;
              br